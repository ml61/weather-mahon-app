(this["webpackJsonpweather-mahon-app"]=this["webpackJsonpweather-mahon-app"]||[]).push([[0],{103:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(10),r=n.n(a),i=n(31),s=n(7),o=n(13),l=n(5),d=n(23),u=n.n(d),j=n(41),b="SET_CURRENT_POSITION",h="SET_WEATHER_DATE",m="START_LOADING",x="SUCCESS_LOADING",O="ERROR_LOADING",p="SET_FORECAST",f="ADD_CITY_TO_MY_CITIES",y="DELETE_CITY_FROM_MY_CITIES",v="ADD_NOTE",g="DELETE_NOTE",N=n(36),w=n.n(N),C="IIBx8OcIbZkn9b9WNsTaw7hW4Y1e97GS",D="AIzaSyBQ9d4Y0sUxB7fXYSHovtlq_YGozZfpm8Q",S="https://maps.googleapis.com/maps/api/place",T=w.a.create({baseURL:"http://dataservice.accuweather.com"}),E=(w.a.create({baseURL:S}),w.a.create({baseURL:"https://cors-anywhere.herokuapp.com/"+S})),k=function(e){var t;return(t=Array.isArray(e)?e[0]:e).ParentCity?{id:t.ParentCity.Key,name:t.ParentCity.EnglishName,country:t.Country.EnglishName}:{id:t.Key,name:t.EnglishName,country:t.Country.EnglishName}},_=function(e){var t=""+(e.getMonth()+1),n=""+e.getDate(),c=e.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[n,t,c].join("-")},I=function(e,t){return!!t.find((function(t){return t.id===e.id}))},F=n(21),A=n(1);var L=function(){var e=Object(c.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(l.b)();return Object(A.jsxs)("form",{className:"form-inline d-flex justify-content-center align-items-center",onSubmit:function(e){var t;e.preventDefault(),r((t=n,function(){var e=Object(j.a)(u.a.mark((function e(n){var c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:m}),e.prev=1,e.next=4,T.get("/locations/v1/cities/search",{params:{q:t,apikey:C}});case 4:if(0!==(c=e.sent).data.length){e.next=10;break}throw console.log("this is from error"),(a=new Error).message="We don't have any results for ".concat(t,". Please check input and try again"),a;case 10:r=k(c.data),n({type:b,payload:r}),n({type:x}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),n({type:O,payload:e.t0});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(A.jsxs)("div",{className:"d-flex mx-2",children:[Object(A.jsx)("label",{className:"mx-2",htmlFor:"inputCity",children:"City"}),Object(A.jsx)("input",{type:"text",className:"form-control",id:"inputCity",value:n,onChange:function(e){a(e.target.value)},required:!0})]}),Object(A.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})},R=n(33),M=n(34);var P=function(e){var t=e.date;return Object(A.jsx)("option",{value:_(t),children:_(t)})};var Y=function(){var e=Object(c.useState)(new Date(Date.now())),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(F.a)(r,2),s=i[0],o=i[1],d=Object(l.b)();return Object(c.useEffect)((function(){o(function(){for(var e=[new Date(Date.now())],t=0;t<4;t++)e.push(new Date(e[t].getTime()+864e5));return e}())}),[]),s?Object(A.jsx)("div",{className:"d-flex mx-3",children:Object(A.jsx)("select",{id:"inputState",className:"form-control",value:n,onChange:function(e){a(e.target.value),d({type:h,payload:e.target.value})},children:s.map((function(e,t){return Object(A.jsx)(P,{date:e},t)}))})}):null};var U=function(e){var t=e.err;return Object(A.jsx)("div",{children:Object(A.jsx)("h2",{children:null===t||void 0===t?void 0:t.message})})};var W=function(e){var t=e.forecastForChosenDate,n=e.error,c=(e.isLoading,e.currentCity);if(!t)return Object(A.jsx)(U,{err:n});var a=t.cloudCover,r=t.icon,i=t.iconPhrase,s=t.description,o=t.windDirection,l=t.windSpeed,d=t.minTemperature,u=t.maxTemperature;return n?Object(A.jsx)(U,{err:n}):Object(A.jsx)("div",{className:"container-fluid",children:Object(A.jsx)("div",{className:"row justify-content-center",children:Object(A.jsx)("div",{className:"col-12 col-md-12 col-sm-12 col-xs-12",children:Object(A.jsxs)("div",{className:"card p-4",children:[Object(A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(A.jsx)("h4",{children:c.name}),Object(A.jsx)(Y,{}),Object(A.jsx)("h4",{children:c.country})]}),Object(A.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center temp mt-5 mb-5",children:[Object(A.jsxs)("h1",{className:"mb-2 font-weight-bold",id:"heading",children:[Object(A.jsx)(R.a,{icon:M.d})," ",Object(A.jsxs)("span",{className:"mx-3",children:[" ",d,"\xb0 C"]})," "]})," ",Object(A.jsxs)("h1",{className:"mb-0 font-weight-bold",id:"heading",children:[Object(A.jsx)(R.a,{icon:M.c})," ",Object(A.jsxs)("span",{className:"mx-3",children:[" ",u,"\xb0 C"]})," "]})," ",Object(A.jsx)("span",{className:"small grey mt-1",children:s})]}),Object(A.jsxs)("div",{className:"d-flex",children:[Object(A.jsxs)("div",{className:"temp-details flex-grow-1",children:[Object(A.jsxs)("p",{className:"my-1",children:[Object(A.jsx)(R.a,{icon:M.e,size:"lg"}),Object(A.jsxs)("span",{className:"mx-1",children:[" ",l," km/h "]})]}),Object(A.jsxs)("p",{className:"my-1",children:[Object(A.jsx)(R.a,{icon:M.b,size:"lg"}),Object(A.jsxs)("span",{className:"mx-1",children:[" ",o," "]})]}),Object(A.jsxs)("p",{className:"my-1",children:[Object(A.jsx)(R.a,{icon:M.a,size:"lg"}),Object(A.jsxs)("span",{className:"mx-1",children:[" ",a,"% "]})]})]}),Object(A.jsx)("div",{children:Object(A.jsx)("img",{src:"https://apidev.accuweather.com/developers/Media/Default/WeatherIcons/"+r,alt:i,width:"100px"})})]})]})})})})};var q=function(){return Object(A.jsx)("div",{children:Object(A.jsx)("h2",{children:"Loading"})})},z=n(119),B=n(35),H=n(71);var G=function(e){var t=Object(c.useState)(""),n=Object(F.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(""),s=Object(F.a)(i,2),d=s[0],u=s[1],j=Object(c.useState)(!1),b=Object(F.a)(j,2),h=b[0],m=b[1],x=Object(l.c)((function(e){return e.weatherDate})),O=Object(l.b)();return Object(A.jsxs)(B.a,Object(o.a)(Object(o.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(A.jsx)(B.a.Header,{closeButton:!0,children:Object(A.jsx)(B.a.Title,{id:"contained-modal-title-vcenter",children:"Fill the form for adding note"})}),Object(A.jsxs)("form",{onSubmit:function(t){t.preventDefault(),m(!0),O(function(e,t,n){var c=Date.now(),a=_(new Date(c));return{type:v,payload:{noteTitle:e,noteDescription:t,noteForDate:n,whenAdded:a,id:c}}}(a,d,x)),setTimeout((function(){e.onHide(),m(!1),r(""),u("")}),3e3)},children:[Object(A.jsx)(B.a.Body,{children:h?Object(A.jsxs)(H.a,{variant:"success",children:["Note ",a," was successfully added to note-list."]}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:"mb-2",children:[Object(A.jsx)("label",{className:"mx-2",htmlFor:"inputCity",children:"Note Title"}),Object(A.jsx)("input",{type:"text",className:"form-control",id:"inputCity",value:a,onChange:function(e){r(e.target.value)},maxlength:"20",required:!0})]}),Object(A.jsxs)("div",{class:"form-group",children:[Object(A.jsx)("label",{htmlFor:"exampleFormControlTextarea1",children:"Description"}),Object(A.jsx)("textarea",{class:"form-control",id:"exampleFormControlTextarea1",rows:"3",value:d,onChange:function(e){u(e.target.value)},maxlength:"100"})]})]})}),Object(A.jsxs)(B.a.Footer,{children:[h?null:Object(A.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Submit"}),Object(A.jsx)(z.a,{className:"mx-4",onClick:e.onHide,children:"Close"})]})]})]}))};var J=function(e){var t=e.currentCity,n=e.myCities,a=e.error,r=(e.weatherDate,Object(c.useState)(!1)),i=Object(F.a)(r,2),s=i[0],d=i[1],b=Object(l.b)();return a?null:Object(A.jsxs)("div",{className:"mt-4 mb-4 d-flex justify-content-around",children:[Object(A.jsx)(z.a,{variant:"contained",color:"primary",onClick:function(){I(t,n)?b({type:y,payload:t}):b(function(e){return function(){var t=Object(j.a)(u.a.mark((function t(n){var c,a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.get("/findplacefromtext/json?input=".concat(e.name,"&key=").concat(D,"&inputtype=textquery&fields=name,photos"));case 3:c=t.sent,a=c.data.candidates[0].photos[0].photo_reference,r=S+"/photo?photoreference=".concat(a,"&key=").concat(D,"&maxwidth=250&maxheight=250"),n({type:f,payload:Object(o.a)(Object(o.a)({},e),{},{imageUrl:r})}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:I(t,n)?"Delete City":"Add City"}),Object(A.jsx)(z.a,{variant:"contained",color:"primary",onClick:function(){return d(!0)},children:"Add Note"}),Object(A.jsx)(G,{show:s,onHide:function(){return d(!1)}})]})};var V=function(){var e=Object(l.c)((function(e){return e.currentCity})),t=Object(l.c)((function(e){return e.isLoading})),n=Object(l.c)((function(e){return e.forecast})),a=Object(l.c)((function(e){return e.weatherDate})),r=Object(l.c)((function(e){return e.errorObj})),i=Object(l.c)((function(e){return e.myCities})),s=Object(l.b)(),d=null===n||void 0===n?void 0:n.find((function(e){return e.weatherDate===a})),h=function(e){var t=e.coords,n=t.latitude,c=t.longitude;s(function(e,t){return function(){var n=Object(j.a)(u.a.mark((function n(c){var a,r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c({type:m}),n.prev=1,n.next=4,T.get("/locations/v1/cities/geoposition/search",{params:{apikey:C,q:"".concat(e,",").concat(t)}});case 4:a=n.sent,r=k(a.data),c({type:b,payload:r}),c({type:x}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),c({type:O,payload:n.t0});case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(e){return n.apply(this,arguments)}}()}(n,c))},f=function(e){s({type:O,payload:Object(o.a)(Object(o.a)({},e),{},{message:"Geolocation was denied. Please enter a city."})})};return Object(c.useEffect)((function(){e||window.navigator.geolocation.getCurrentPosition(h,f)}),[]),Object(c.useEffect)((function(){e&&s(function(e){var t=e.id;return function(){var e=Object(j.a)(u.a.mark((function e(n){var c,a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:m}),e.prev=1,e.next=4,T.get("/forecasts/v1/daily/5day/"+t,{params:{details:!0,metric:!0,apikey:C}});case 4:c=e.sent,a=c.data.DailyForecasts,r=a.map((function(e){var t=e.Date,n=e.Temperature,c=e.Day,a=c.CloudCover,r=c.LongPhrase,i=c.Wind,s=c.IconPhrase,o=function(e){return(e=""+e).length<2?"0".concat(e,"-s.png"):"".concat(e,"-s.png")}(c.Icon),l=i.Direction.Localized,d=i.Speed.Value,u=n.Minimum.Value,j=n.Maximum.Value;return{weatherDate:_(new Date(t)),cloudCover:a,icon:o,iconPhrase:s,description:r,windDirection:l,windSpeed:d,minTemperature:u,maxTemperature:j}})),n({type:p,payload:r}),n({type:x}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n({type:O,payload:e.t0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}(e))}),[e]),Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)(L,{}),Object(A.jsxs)("div",{className:"mt-4 d-flex flex-column",children:[t?Object(A.jsx)(q,{}):Object(A.jsx)(W,{forecastForChosenDate:d,error:r,isLoading:t,currentCity:e}),Object(A.jsx)(J,{currentCity:e,myCities:i,error:r,weatherDate:a})]})]})},K=n(17);var Q=function(e){var t=e.imageUrl,n=e.name,c=e.country,a=e.id,r=Object(s.f)(),i=Object(l.b)();return Object(A.jsx)("div",{className:"col-xs-12 col-md-6 col-lg-4 col-xl-3  mb-3",children:Object(A.jsxs)(K.a,{style:{height:"25rem"},children:[Object(A.jsx)("div",{className:"card__img-container ",children:Object(A.jsx)(K.a.Img,{className:"card__img",variant:"top",src:t})}),Object(A.jsxs)(K.a.Body,{className:"d-flex flex-column",children:[Object(A.jsxs)("div",{className:"flex-grow-1",children:[Object(A.jsx)(K.a.Title,{children:n}),Object(A.jsx)(K.a.Text,{children:c})]}),Object(A.jsx)(z.a,{variant:"contained",color:"primary",onClick:function(){i({type:b,payload:{name:n,country:c,id:a}}),r.push("/")},children:"Check Weather"})]})]})})};var Z=function(){var e=Object(l.c)((function(e){return e.myCities}));return Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)("h2",{className:"d-flex justify-content-center mb-4",children:"My cities"}),Object(A.jsx)("div",{className:"row",children:e.map((function(e){return Object(A.jsx)(Q,Object(o.a)({},e),e.id)}))})]})};var X=function(e){var t=e.noteTitle,n=e.noteDescription,c=e.noteForDate,a=e.id,r=Object(l.b)();return Object(A.jsx)("div",{className:"col-sm-12 col-md-6 col-lg-4 col-xl-3  mb-3",children:Object(A.jsx)(K.a,{style:{height:"18rem"},children:Object(A.jsxs)(K.a.Body,{className:"d-flex flex-column",children:[Object(A.jsxs)("div",{className:"flex-grow-1",children:[Object(A.jsx)(K.a.Title,{children:t}),Object(A.jsxs)(K.a.Subtitle,{className:"mb-2 text-muted",children:["For date: ",c]}),Object(A.jsx)(K.a.Text,{children:n})]}),Object(A.jsx)(z.a,{variant:"contained",color:"secondary",onClick:function(){r({type:g,payload:a})},children:"Done and Delete"})]})})})};var $=function(){var e=Object(l.c)((function(e){return e.myNotes}));return Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)("h2",{className:"d-flex justify-content-center mb-4",children:"My notes"}),Object(A.jsx)("div",{className:"row",children:e.map((function(e){return Object(A.jsx)(X,Object(o.a)({},e),e.id)}))})]})};var ee=function(){return Object(A.jsx)("div",{children:Object(A.jsx)("nav",{children:Object(A.jsxs)("ul",{className:"d-flex p-2 bd-highlight justify-content-around list-unstyled",children:[Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/",children:Object(A.jsx)(z.a,{variant:"outlined",color:"primary",children:"Home"})})}),Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/mycities",children:Object(A.jsx)(z.a,{variant:"outlined",color:"primary",children:"My Cities"})})}),Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:"/mynotes",children:Object(A.jsx)(z.a,{variant:"outlined",color:"primary",children:"My Notes"})})})]})})})};var te=function(){return Object(A.jsx)(i.a,{children:Object(A.jsxs)("div",{children:[Object(A.jsx)(ee,{}),Object(A.jsxs)(s.c,{children:[Object(A.jsx)(s.a,{exact:!0,path:"/",children:Object(A.jsx)(V,{})}),Object(A.jsx)(s.a,{path:"/mycities",children:Object(A.jsx)(Z,{})}),Object(A.jsx)(s.a,{path:"/mynotes",children:Object(A.jsx)($,{})})]})]})})},ne=n(28),ce=n(69),ae=n(70),re=n(50),ie=Object(ne.combineReducers)({currentCity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return t.payload;default:return e}},weatherDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_(new Date(Date.now())),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return t.payload;default:return e}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return!0;case x:case O:return!1;default:return e}},errorObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return null;case O:return t.payload;default:return e}},forecast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return t.payload;default:return e}},myCities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return[].concat(Object(re.a)(e),[t.payload]);case y:return e.filter((function(e){return e.id!==t.payload.id}));default:return e}},myNotes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return[].concat(Object(re.a)(e),[t.payload]);case g:return e.filter((function(e){return e.id!==t.payload}));default:return e}}});n(103),n(104);var se=Object(ne.createStore)(ie,function(){try{var e=localStorage.getItem("persistantState");if(null===e)return;return JSON.parse(e)}catch(t){return void console.warn(t)}}(),Object(ae.composeWithDevTools)(Object(ne.applyMiddleware)(ce.a)));se.subscribe((function(){return function(e){try{var t={currentCity:e.currentCity,myCities:e.myCities,myNotes:e.myNotes},n=JSON.stringify(t);localStorage.setItem("persistantState",n)}catch(c){console.warn(c)}}(se.getState())})),r.a.render(Object(A.jsx)(l.a,{store:se,children:Object(A.jsx)(te,{})}),document.querySelector("#root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.c7213a31.chunk.js.map